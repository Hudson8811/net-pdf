let $=jQuery.noConflict();function declOfNum(e,t){var l=(e=Math.abs(e)%100)%10;return e>10&&e<20?t[2]:l>1&&l<5?t[1]:1==l?t[0]:t[2]}function checkESform(){$(".ec-form input.required").trigger("change")}function echoNumber(e){return String(e).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1.")}$(document).ready((function(){$(".ec-options .tooltip").hover((function(){$(this).closest(".checkbox").find(".tooltiptext").css("visibility","visible")}),(function(){$(this).closest(".checkbox").find(".tooltiptext").css("visibility","hidden")})),$(".js-video-popup").magnificPopup({type:"iframe"}),$(".ec-form__field input.required:not(.number-limit):not(.number-limit-2)").inputFilter((function(e){return/^\d*$/.test(e)})),$(".ec-form__field input.required.number-limit").inputFilter((function(e){return/^[123]?$/.test(e)})),$(".ec-form__field input.required.number-limit-2").inputFilter((function(e){return/^[0123]?$/.test(e)})),$(".ec-form__field input.required").on("change",(function(){""===$(this).val().trim()?$(this).closest(".ec-form__field").addClass("ec-form__field--error"):$(this).closest(".ec-form__field").removeClass("ec-form__field--error")})),$(".e-select-1").on("change",(function(){"n"===$(this).val()&&$(".e-select-2").val("y").change()})),$(".e-select-2").on("change",(function(){"n"===$(this).val()&&$(".e-select-1").val("y").change()})),$(".ec-form__col-field input.required").on("change",(function(){""===$(this).val().trim()?$(this).closest(".ec-form__col-field").addClass("ec-form__col-field--error"):$(this).closest(".ec-form__col-field").removeClass("ec-form__col-field--error")})),$(".ec-form .ec-btn").on("click",(function(){checkESform()}));let e=0;function t(e){let t=$(".ec-options"),l=e;t.find("input:checked").each((function(){l+=parseInt($(this).data("price"))})),$(".ec-options__total .es-total__right > div").html(echoNumber(l)+" р.")}var l,s,n,c,i;$(".ec-form").on("submit",(function(){event.preventDefault();let l=$(".ec-form"),s=parseInt(l.data("id"));if(1===s){let s=parseInt(l.find('input[name="es_field_1"]').val()),n=(parseInt(l.find('input[name="es_field_2"]').val()),parseInt(l.find('input[name="es_field_3"]').val())),c=parseInt(l.find('input[name="es_field_4"]').val()),i=parseInt(l.find('input[name="es_field_5"]').val()),o=parseInt(l.find('input[name="es_field_6"]').val()),r="1 камерой",_="",u="",a=7500,d=1;2===c?(a=8500,r="2 камерами"):3===c&&(a=9500,r="3 камерами");let f=0;if(f+=a*s*2,f+=a*n,i>2&&(f+=2e3*i),o>20?(d=1.4,u="от 21"):o>15?(d=1.35,u="от 16 до 20"):o>10?(d=1.3,u="от 11 до 15"):o>6?(d=1.2,u="от 7 до 10"):o>3&&(d=1.1,u="от 3 до 6"),f*=d,f>=5e5?(f*=.85,_=" - <span>15% скидка</span>"):f>=26e4?(f*=.9,_=" - <span>10% скидка</span>"):f>=18e4&&(f*=.95,_=" - <span>5% скидка</span>"),f=Math.round(f),e=f,$(".ec-results__total .es-total > div").html("ИТОГО: "+echoNumber(f)+" р."),$(".ec-results__col--1 .ec-results__col-number").html(echoNumber(a)+" р./час * "+2*s+" "+declOfNum(2*s,["час","часа","часов"])),$(".ec-results__col--1 .ec-results__col-text").html("Ставка за час за комплект оборудования со съемочной группой с "+r),n>0?($(".ec-results__col--5 .ec-results__col-number").html("&nbsp;+ "+echoNumber(a)+" р."),$(".ec-results__col--2 .ec-results__col-number").html("&nbsp;* "+n+" "+declOfNum(n,["час","часа","часов"])),$(".ec-results__col--5, .ec-results__col--2").show()):$(".ec-results__col--5, .ec-results__col--2").hide(),i>2?($(".ec-results__col--4 .ec-results__col-number").html("&nbsp;+ 2.000 р. * "+i),$(".ec-results__col--4").show()):$(".ec-results__col--4").hide(),_||u){let e="&nbsp;";u?(e+="* "+d,$(".ec-results__col--3 .ec-results__col-text").html("Коэффициент количества спикеров <br>"+u).show()):$(".ec-results__col--3 .ec-results__col-text").html("Коэффициент количества спикеров <br>"+u).hide(),_&&(e+=_),$(".ec-results__col--3 .ec-results__col-number").html(e),$(".ec-results__col--3, .ec-results__col--sep").show()}else $(".ec-results__col--3, .ec-results__col--sep").hide();t(e),$(".event-calc__section--3").slideDown(200,"linear",(function(){$(".event-calc__section--4").slideDown(300,"linear",(function(){$(".event-calc__section--5").slideDown(300,"linear")}))}))}else if(2===s){let s=parseInt(l.find('input[name="es_field_1"]').val()),n=(parseInt(l.find('input[name="es_field_2"]').val()),l.find('select[name="es_field_3"]').val(),parseInt(l.find('input[name="es_field_4"]').val())),c=l.find('select[name="es_field_5"]').val(),i=parseInt(l.find('input[name="es_field_6"]').val()),o=parseInt(l.find('input[name="es_field_7"]').val()),r="Ставка за час за комплект оборудования",_="",u="",a=4500,d=1;1===n?(a=7500,r="Ставка за час за комплект оборудования со съемочной группой с 1 камерой"):2===n&&(a=8500,r="Ставка за час за комплект оборудования со съемочной группой с 2 камерами"),3===n&&(a=9500,r="Ставка за час за комплект оборудования со съемочной группой с 3 камерами");let f=0;if(f+=a*(s+2),"y"===c&&(f+=5500*(s+2)),i>0&&(f+=2500*i),o>20?(d=1.4,u="от 21"):i>15?(d=1.35,u="от 16 до 20"):i>10?(d=1.3,u="от 11 до 15"):i>6?(d=1.2,u="от 7 до 10"):i>3&&(d=1.1,u="от 3 до 6"),f*=d,f=Math.round(f),e=f,$(".ec-results__total .es-total > div").html("ИТОГО: "+echoNumber(f)+" р."),$(".ec-results__col--1 .ec-results__col-number").html(echoNumber(a)+" р./час * "+2*s+" "+declOfNum(s+2,["час","часа","часов"])),$(".ec-results__col--1 .ec-results__col-text").html(r),"y"===c?($(".ec-results__col--11 .ec-results__col-number").html("&nbsp;+ 5.500 р. * "+declOfNum(s+2,["час","часа","часов"])),$(".ec-results__col--11").show()):$(".ec-results__col--11").hide(),i>0?($(".ec-results__col--12 .ec-results__col-number").html("&nbsp;+ 2.500 р. * "+declOfNum(i,["час","часа","часов"])),$(".ec-results__col--12").show()):$(".ec-results__col--12").hide(),_||u){let e="&nbsp;";u?(e+="* "+d,$(".ec-results__col--3 .ec-results__col-text").html("Коэффициент количества спикеров <br>"+u).show()):$(".ec-results__col--3 .ec-results__col-text").html("Коэффициент количества спикеров <br>"+u).hide(),_&&(e+=_),$(".ec-results__col--3 .ec-results__col-number").html(e),$(".ec-results__col--3, .ec-results__col--sep").show()}else $(".ec-results__col--3, .ec-results__col--sep").hide();t(e),$(".event-calc__section--3").slideDown(200,"linear",(function(){$(".event-calc__section--4").slideDown(300,"linear",(function(){$(".event-calc__section--5").slideDown(300,"linear")}))}))}})),$(".ec-options .checkbox").on("change",(function(){t(e)})),$(".ec-options").on("submit",(function(){event.preventDefault(),alert("pdf отправлен")})),$(".es-quest__item").on("click",(function(){event.preventDefault();$(this).data("id");$(".es-quest__flex").hide(),$(".es-quest__thanks").show()})),l=$("body"),s=$(".header"),n=s.offset().top,c=s.outerHeight(),$(window).scrollTop(),i=!!(s.hasClass("header--half")&&$(window).width()>=1024),$(window).on("scroll",(function(){$(window).scrollTop()>=n+c?(c=s.outerHeight(),s.addClass("header--fixed"),s.hasClass("is-fixed")||(s.css({top:-c+"px",transform:"translateY("+c+"px)"}).addClass("is-fixed"),i||l.css("padding-top",c+"px"))):(s.removeClass("header--fixed is-fixed").removeAttr("style"),l.css("padding-top",0))}))})),jQuery.fn.inputFilter=function(e){return this.on("input keydown keyup mousedown mouseup select contextmenu drop",(function(){e(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")?(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd)):this.value=""}))};
//# sourceMappingURL=maps/main.min.js.map
