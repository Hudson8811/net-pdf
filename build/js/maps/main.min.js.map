{"version":3,"sources":["main.js"],"names":["$","jQuery","noConflict","declOfNum","n","text_forms","n1","Math","abs","checkESform","trigger","echoNumber","String","replace","document","ready","hover","this","closest","find","css","magnificPopup","type","inputFilter","value","test","on","val","trim","addClass","removeClass","globalEsPrice","addEsCalc","form","addPrice","each","parseInt","data","html","event","preventDefault","es_field_1","es_field_3","es_field_4","es_field_5","es_field_6","htmlText1","htmlText2","htmlText3","baseHourPrice","multiple","totalPrice","round","show","hide","tempHtml","slideDown","alert","fn","oldValue","oldSelectionStart","selectionStart","oldSelectionEnd","selectionEnd","hasOwnProperty","setSelectionRange"],"mappings":"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","file":"../main.min.js","sourcesContent":["let $ = jQuery.noConflict();\r\n\r\n$(document).ready(function() {\r\n    $(\".ec-options .tooltip\").hover(\r\n        function() {\r\n            $(this).closest('.checkbox').find('.tooltiptext').css(\"visibility\", \"visible\");\r\n        },\r\n        function() {\r\n            $(this).closest('.checkbox').find('.tooltiptext').css(\"visibility\", \"hidden\");\r\n        }\r\n    );\r\n\r\n    $('.js-video-popup').magnificPopup({\r\n        type: 'iframe'\r\n    });\r\n\r\n    $(\".ec-form__field input.required:not(.number-limit)\").inputFilter(function(value) {\r\n        return /^\\d*$/.test(value);\r\n    });\r\n    $(\".ec-form__field input.required.number-limit\").inputFilter(function(value) {\r\n        return /^[123]?$/.test(value);\r\n    });\r\n    $('.ec-form__field input.required').on('change',function (){\r\n        let value = $(this).val();\r\n        if (value.trim() === ''){\r\n            $(this).closest('.ec-form__field').addClass('ec-form__field--error');\r\n        } else {\r\n            $(this).closest('.ec-form__field').removeClass('ec-form__field--error');\r\n        }\r\n    });\r\n\r\n    $('.ec-form__col-field input.required').on('change',function (){\r\n        let value = $(this).val();\r\n        if (value.trim() === ''){\r\n            $(this).closest('.ec-form__col-field').addClass('ec-form__col-field--error');\r\n        } else {\r\n            $(this).closest('.ec-form__col-field').removeClass('ec-form__col-field--error');\r\n        }\r\n    });\r\n\r\n\r\n    $('.ec-form .ec-btn').on('click',function (){\r\n        checkESform();\r\n    });\r\n    let globalEsPrice = 0;\r\n    $('.ec-form').on('submit',function (){\r\n        event.preventDefault();\r\n        let form = $('.ec-form');\r\n        let es_field_1 = parseInt(form.find('input[name=\"es_field_1\"]').val()),\r\n            es_field_2 = parseInt(form.find('input[name=\"es_field_2\"]').val()),\r\n            es_field_3 = parseInt(form.find('input[name=\"es_field_3\"]').val()),\r\n            es_field_4 = parseInt(form.find('input[name=\"es_field_4\"]').val()),\r\n            es_field_5 = parseInt(form.find('input[name=\"es_field_5\"]').val()),\r\n            es_field_6 = parseInt(form.find('input[name=\"es_field_6\"]').val());\r\n\r\n        let htmlText1 = '1 камерой';\r\n        let htmlText2 = '';\r\n        let htmlText3 = '';\r\n\r\n        let baseHourPrice = 7500;\r\n        let multiple = 1;\r\n        if (es_field_4 === 2) {\r\n            baseHourPrice = 8500;\r\n            htmlText1 = '2 камерами';\r\n        } else if (es_field_4 === 3) {\r\n            baseHourPrice = 9500;\r\n            htmlText1 = '3 камерами';\r\n        }\r\n\r\n        let totalPrice = 0;\r\n        totalPrice += baseHourPrice*es_field_1*2;\r\n        totalPrice += baseHourPrice*es_field_3;\r\n\r\n        if (es_field_5 > 2){\r\n            totalPrice += 2000*es_field_5;\r\n        }\r\n        if (es_field_6 > 20){\r\n            multiple = 1.4;\r\n            htmlText3 = 'от 21';\r\n        } else if (es_field_6 > 15) {\r\n            multiple = 1.35;\r\n            htmlText3 = 'от 16 до 20';\r\n        } else if (es_field_6 > 10) {\r\n            multiple = 1.3;\r\n            htmlText3 = 'от 11 до 15';\r\n        } else if (es_field_6 > 6) {\r\n            multiple = 1.2;\r\n            htmlText3 = 'от 7 до 10';\r\n        } else if (es_field_6 > 3) {\r\n            multiple = 1.1;\r\n            htmlText3 = 'от 3 до 6';\r\n        }\r\n        totalPrice = totalPrice*multiple;\r\n        if (totalPrice >=500000){\r\n            totalPrice = totalPrice*0.85;\r\n            htmlText2 = ' - <span>15% скидка</span>'\r\n        } else if (totalPrice >=260000){\r\n            totalPrice = totalPrice*0.9;\r\n            htmlText2 = ' - <span>10% скидка</span>'\r\n        } else if (totalPrice >=180000){\r\n            totalPrice = totalPrice*0.95;\r\n            htmlText2 = ' - <span>5% скидка</span>'\r\n        }\r\n\r\n        totalPrice = Math.round(totalPrice);\r\n        globalEsPrice = totalPrice;\r\n\r\n\r\n        $('.ec-results__total .es-total > div').html('ИТОГО: '+echoNumber(totalPrice)+' р.');\r\n        $('.ec-results__col--1 .ec-results__col-number').html(echoNumber(baseHourPrice)+' р./час * '+es_field_1*2+' '+declOfNum(es_field_1*2, ['час', 'часа', 'часов']));\r\n        $('.ec-results__col--1 .ec-results__col-text').html('Ставка за час за комплект оборудования со съемочной группой с '+htmlText1);\r\n        if (es_field_3 > 0){\r\n            $('.ec-results__col--5 .ec-results__col-number').html('&nbsp;+ '+echoNumber(baseHourPrice)+' р.');\r\n            $('.ec-results__col--2 .ec-results__col-number').html('&nbsp;* '+es_field_3+' '+declOfNum(es_field_3, ['час', 'часа', 'часов']));\r\n            $('.ec-results__col--5, .ec-results__col--2').show();\r\n        } else {\r\n            $('.ec-results__col--5, .ec-results__col--2').hide();\r\n        }\r\n        if (es_field_5 > 2){\r\n            $('.ec-results__col--4 .ec-results__col-number').html('&nbsp;+ 2.000 р. * '+es_field_5);\r\n            $('.ec-results__col--4').show();\r\n        } else {\r\n            $('.ec-results__col--4').hide();\r\n        }\r\n\r\n        if (htmlText2 || htmlText3){\r\n            let tempHtml = '&nbsp;';\r\n            if (htmlText3) {\r\n                tempHtml += '* '+multiple;\r\n                $('.ec-results__col--3 .ec-results__col-text').html('Коэффициент количества спикеров <br>'+htmlText3).show();\r\n            } else {\r\n                $('.ec-results__col--3 .ec-results__col-text').html('Коэффициент количества спикеров <br>'+htmlText3).hide();\r\n            }\r\n            if (htmlText2) {\r\n                tempHtml += htmlText2;\r\n            }\r\n            $('.ec-results__col--3 .ec-results__col-number').html(tempHtml);\r\n            $('.ec-results__col--3, .ec-results__col--sep').show();\r\n        } else {\r\n            $('.ec-results__col--3, .ec-results__col--sep').hide();\r\n        }\r\n        addEsCalc(globalEsPrice);\r\n\r\n        $('.event-calc__section--3').slideDown(200,'linear',function (){\r\n            $('.event-calc__section--4').slideDown(300,'linear',function (){\r\n                $('.event-calc__section--5').slideDown(300,'linear');\r\n            });\r\n        });\r\n    });\r\n\r\n    function addEsCalc(globalEsPrice){\r\n        let form = $('.ec-options');\r\n        let addPrice = globalEsPrice;\r\n        form.find('input:checked').each(function() {\r\n            addPrice += parseInt($(this).data('price'));\r\n        });\r\n        $('.ec-options__total .es-total__right > div').html(echoNumber(addPrice)+' р.');\r\n    }\r\n\r\n    $('.ec-options .checkbox').on('change',function (){\r\n        addEsCalc(globalEsPrice);\r\n    });\r\n\r\n    $('.ec-options').on('submit',function () {\r\n        event.preventDefault();\r\n        alert('pdf отправлен');\r\n    });\r\n    $('.es-quest__item').on('click',function () {\r\n        event.preventDefault();\r\n        let id = $(this).data('id');\r\n        $('.es-quest__flex').hide();\r\n        $('.es-quest__thanks').show();\r\n    });\r\n});\r\n\r\nfunction declOfNum(n, text_forms) {\r\n    n = Math.abs(n) % 100;\r\n    var n1 = n % 10;\r\n    if (n > 10 && n < 20) { return text_forms[2]; }\r\n    if (n1 > 1 && n1 < 5) { return text_forms[1]; }\r\n    if (n1 == 1) { return text_forms[0]; }\r\n    return text_forms[2];\r\n}\r\n\r\nfunction checkESform(){\r\n    $('.ec-form input.required').trigger('change');\r\n}\r\nfunction echoNumber(n){\r\n    return String(n).replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1.\")\r\n}\r\n\r\n\r\n(function($) {\r\n    $.fn.inputFilter = function(inputFilter) {\r\n        return this.on(\"input keydown keyup mousedown mouseup select contextmenu drop\", function() {\r\n            if (inputFilter(this.value)) {\r\n                this.oldValue = this.value;\r\n                this.oldSelectionStart = this.selectionStart;\r\n                this.oldSelectionEnd = this.selectionEnd;\r\n            } else if (this.hasOwnProperty(\"oldValue\")) {\r\n                this.value = this.oldValue;\r\n                this.setSelectionRange(this.oldSelectionStart, this.oldSelectionEnd);\r\n            } else {\r\n                this.value = \"\";\r\n            }\r\n        });\r\n    };\r\n}(jQuery));"]}