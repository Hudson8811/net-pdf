{"version":3,"sources":["main.js"],"names":["$","jQuery","noConflict","declOfNum","n","text_forms","n1","Math","abs","checkESform","trigger","echoNumber","String","replace","document","ready","hover","this","closest","find","css","magnificPopup","type","inputFilter","value","test","on","val","trim","addClass","removeClass","change","hide","prop","show","globalEsPrice","addEsCalc","form","addPrice","each","parseInt","data","html","body","header","headerOffset","headerHeight","isNotStatic","event","preventDefault","formId","es_field_1","es_field_2","es_field_3","es_field_4","es_field_5","es_field_6","htmlText1","htmlText2","htmlText3","baseHourPrice","multiple","totalPrice","round","tempHtml","slideDown","es_field_7","addHoues","alert","offset","top","outerHeight","window","scrollTop","hasClass","width","transform","classes","removeAttr","fn","oldValue","oldSelectionStart","selectionStart","oldSelectionEnd","selectionEnd","hasOwnProperty","setSelectionRange"],"mappings":"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","file":"../main.min.js","sourcesContent":["let $ = jQuery.noConflict();\r\n\r\n$(document).ready(function() {\r\n    $(\".ec-options .tooltip\").hover(\r\n        function() {\r\n            $(this).closest('.checkbox').find('.tooltiptext').css(\"visibility\", \"visible\");\r\n        },\r\n        function() {\r\n            $(this).closest('.checkbox').find('.tooltiptext').css(\"visibility\", \"hidden\");\r\n        }\r\n    );\r\n\r\n    $('.js-video-popup').magnificPopup({\r\n        type: 'iframe'\r\n    });\r\n\r\n    $(\".ec-form__field input.required:not(.number-limit):not(.number-limit-2)\").inputFilter(function(value) {\r\n        return /^\\d*$/.test(value);\r\n    });\r\n    $(\".ec-form__field input.required.number-limit\").inputFilter(function(value) {\r\n        return /^[123]?$/.test(value);\r\n    });\r\n    $(\".ec-form__field input.required.number-limit-2\").inputFilter(function(value) {\r\n        return /^[0123]?$/.test(value);\r\n    });\r\n    $('.ec-form__field input.required').on('change',function (){\r\n        let value = $(this).val();\r\n        if (value.trim() === ''){\r\n            $(this).closest('.ec-form__field').addClass('ec-form__field--error');\r\n        } else {\r\n            $(this).closest('.ec-form__field').removeClass('ec-form__field--error');\r\n        }\r\n    });\r\n\r\n    $('.e-select-1').on('change',function (){\r\n       let value = $(this).val();\r\n       if (value === 'n') {\r\n           $(\".e-select-2\").val(\"y\").change();\r\n           $(\".ec-form__section--sel-1\").hide().find('input').removeClass('required').prop('required',false);\r\n       } else {\r\n           $(\".ec-form__section--sel-1\").show().find('input').addClass('required').prop('required',true);\r\n       }\r\n    });\r\n    $('.e-select-2').on('change',function (){\r\n       let value = $(this).val();\r\n       if (value === 'n') {\r\n           $(\".e-select-1\").val(\"y\").change();\r\n           $(\".ec-form__section--sel-1\").show().find('input').addClass('required').prop('required',true);\r\n       }\r\n    });\r\n\r\n    $('.ec-form__col-field input.required').on('change',function (){\r\n        let value = $(this).val();\r\n        if (value.trim() === ''){\r\n            $(this).closest('.ec-form__col-field').addClass('ec-form__col-field--error');\r\n        } else {\r\n            $(this).closest('.ec-form__col-field').removeClass('ec-form__col-field--error');\r\n        }\r\n    });\r\n\r\n\r\n\r\n    $('.ec-form .ec-btn').on('click',function (){\r\n        checkESform();\r\n    });\r\n    let globalEsPrice = 0;\r\n    $('.ec-form').on('submit',function (){\r\n        event.preventDefault();\r\n        let form = $('.ec-form');\r\n        let formId = parseInt(form.data('id'));\r\n        if (formId === 1){\r\n            let es_field_1 = parseInt(form.find('input[name=\"es_field_1\"]').val()),\r\n                es_field_2 = parseInt(form.find('input[name=\"es_field_2\"]').val()),\r\n                es_field_3 = parseInt(form.find('input[name=\"es_field_3\"]').val()),\r\n                es_field_4 = parseInt(form.find('input[name=\"es_field_4\"]').val()),\r\n                es_field_5 = parseInt(form.find('input[name=\"es_field_5\"]').val()),\r\n                es_field_6 = parseInt(form.find('input[name=\"es_field_6\"]').val());\r\n\r\n            let htmlText1 = '1 камерой';\r\n            let htmlText2 = '';\r\n            let htmlText3 = '';\r\n\r\n            let baseHourPrice = 7500;\r\n            let multiple = 1;\r\n            if (es_field_4 === 2) {\r\n                baseHourPrice = 8500;\r\n                htmlText1 = '2 камерами';\r\n            } else if (es_field_4 === 3) {\r\n                baseHourPrice = 9500;\r\n                htmlText1 = '3 камерами';\r\n            }\r\n\r\n            let totalPrice = 0;\r\n            totalPrice += baseHourPrice*es_field_1*2;\r\n            totalPrice += baseHourPrice*es_field_3;\r\n\r\n            totalPrice += 10000*es_field_2;\r\n\r\n            if (es_field_5 > 2){\r\n                totalPrice += 2000*es_field_5;\r\n            }\r\n            if (es_field_6 > 20){\r\n                multiple = 1.4;\r\n                htmlText3 = 'от 21';\r\n            } else if (es_field_6 > 15) {\r\n                multiple = 1.35;\r\n                htmlText3 = 'от 16 до 20';\r\n            } else if (es_field_6 > 10) {\r\n                multiple = 1.3;\r\n                htmlText3 = 'от 11 до 15';\r\n            } else if (es_field_6 > 6) {\r\n                multiple = 1.2;\r\n                htmlText3 = 'от 7 до 10';\r\n            } else if (es_field_6 > 3) {\r\n                multiple = 1.1;\r\n                htmlText3 = 'от 3 до 6';\r\n            }\r\n            totalPrice = totalPrice*multiple;\r\n            if (totalPrice >=500000){\r\n                totalPrice = totalPrice*0.85;\r\n                htmlText2 = ' - <span>15% скидка</span>'\r\n            } else if (totalPrice >=260000){\r\n                totalPrice = totalPrice*0.9;\r\n                htmlText2 = ' - <span>10% скидка</span>'\r\n            } else if (totalPrice >=180000){\r\n                totalPrice = totalPrice*0.95;\r\n                htmlText2 = ' - <span>5% скидка</span>'\r\n            }\r\n\r\n            totalPrice = Math.round(totalPrice);\r\n            globalEsPrice = totalPrice;\r\n\r\n\r\n            $('.ec-results__total .es-total > div').html('ИТОГО: '+echoNumber(totalPrice)+' р.');\r\n            $('.ec-results__col--1 .ec-results__col-number').html(echoNumber(baseHourPrice)+' р./час * '+es_field_1*2+' '+declOfNum(es_field_1*2, ['час', 'часа', 'часов']));\r\n            $('.ec-results__col--1 .ec-results__col-text').html('Ставка за час за комплект оборудования со съемочной группой с '+htmlText1);\r\n            if (es_field_2 > 0){\r\n                $('.ec-results__col--6 .ec-results__col-number').html('&nbsp;+ 10.000 р. * '+es_field_2);\r\n                $('.ec-results__col--6, .ec-results__col--2').show();\r\n            } else {\r\n                $('.ec-results__col--6, .ec-results__col--2').hide();\r\n            }\r\n            if (es_field_3 > 0){\r\n                $('.ec-results__col--5 .ec-results__col-number').html('&nbsp;+ '+echoNumber(baseHourPrice)+' р.');\r\n                $('.ec-results__col--2 .ec-results__col-number').html('&nbsp;* '+es_field_3+' '+declOfNum(es_field_3, ['час', 'часа', 'часов']));\r\n                $('.ec-results__col--5, .ec-results__col--2').show();\r\n            } else {\r\n                $('.ec-results__col--5, .ec-results__col--2').hide();\r\n            }\r\n            if (es_field_5 > 2){\r\n                $('.ec-results__col--4 .ec-results__col-number').html('&nbsp;+ 2.000 р. * '+es_field_5);\r\n                $('.ec-results__col--4').show();\r\n            } else {\r\n                $('.ec-results__col--4').hide();\r\n            }\r\n\r\n            if (htmlText2 || htmlText3){\r\n                let tempHtml = '&nbsp;';\r\n                if (htmlText3) {\r\n                    tempHtml += '* '+multiple;\r\n                    $('.ec-results__col--3 .ec-results__col-text').html('Коэффициент количества спикеров <br>'+htmlText3).show();\r\n                } else {\r\n                    $('.ec-results__col--3 .ec-results__col-text').html('Коэффициент количества спикеров <br>'+htmlText3).hide();\r\n                }\r\n                if (htmlText2) {\r\n                    tempHtml += htmlText2;\r\n                }\r\n                $('.ec-results__col--3 .ec-results__col-number').html(tempHtml);\r\n                $('.ec-results__col--3, .ec-results__col--sep').show();\r\n            } else {\r\n                $('.ec-results__col--3, .ec-results__col--sep').hide();\r\n            }\r\n            addEsCalc(globalEsPrice);\r\n\r\n            $('.event-calc__section--3').slideDown(200,'linear',function (){\r\n                $('.event-calc__section--4').slideDown(300,'linear',function (){\r\n                    $('.event-calc__section--5').slideDown(300,'linear');\r\n                });\r\n            });\r\n        } else if (formId === 2){\r\n            let es_field_1 = parseInt(form.find('input[name=\"es_field_1\"]').val()),\r\n                es_field_2 = parseInt(form.find('input[name=\"es_field_2\"]').val()),\r\n                es_field_3 = form.find('select[name=\"es_field_3\"]').val(),\r\n                es_field_4 = parseInt(form.find('input[name=\"es_field_4\"]').val()),\r\n                es_field_5 = form.find('select[name=\"es_field_5\"]').val(),\r\n                es_field_6 = parseInt(form.find('input[name=\"es_field_6\"]').val()),\r\n                es_field_7 = parseInt(form.find('input[name=\"es_field_7\"]').val());\r\n\r\n            let htmlText1 = 'Ставка за час за комплект оборудования';\r\n            let htmlText2 = '';\r\n            let htmlText3 = '';\r\n\r\n            let addHoues = 2;\r\n\r\n            if (es_field_1 >= 14){\r\n                addHoues = 6;\r\n            } else if (es_field_1 >= 10){\r\n                addHoues = 5;\r\n            } else if (es_field_1 >= 6){\r\n                addHoues = 4;\r\n            }\r\n\r\n            let baseHourPrice = 4500;\r\n            let multiple = 1;\r\n            if (es_field_4 === 1) {\r\n                baseHourPrice = 7500;\r\n                htmlText1 = 'Ставка за час за комплект оборудования со съемочной группой с 1 камерой';\r\n            } else if (es_field_4 === 2) {\r\n                baseHourPrice = 8500;\r\n                htmlText1 = 'Ставка за час за комплект оборудования со съемочной группой с 2 камерами';\r\n            } if (es_field_4 === 3) {\r\n                baseHourPrice = 9500;\r\n                htmlText1 = 'Ставка за час за комплект оборудования со съемочной группой с 3 камерами';\r\n            }\r\n\r\n            let totalPrice = 0;\r\n            totalPrice += baseHourPrice*(es_field_1+addHoues);\r\n\r\n            totalPrice += 10000*es_field_2;\r\n\r\n            if (es_field_5 === 'y'){\r\n                totalPrice += 5500*(es_field_1+addHoues);\r\n            }\r\n            if (es_field_6 > 0){\r\n                totalPrice += 2500*es_field_6;\r\n            }\r\n\r\n            if (es_field_3 === 'y') {\r\n                if (es_field_7 > 20) {\r\n                    multiple = 1.4;\r\n                    htmlText3 = 'от 21';\r\n                } else if (es_field_6 > 15) {\r\n                    multiple = 1.35;\r\n                    htmlText3 = 'от 16 до 20';\r\n                } else if (es_field_6 > 10) {\r\n                    multiple = 1.3;\r\n                    htmlText3 = 'от 11 до 15';\r\n                } else if (es_field_6 > 6) {\r\n                    multiple = 1.2;\r\n                    htmlText3 = 'от 7 до 10';\r\n                } else if (es_field_6 > 3) {\r\n                    multiple = 1.1;\r\n                    htmlText3 = 'от 3 до 6';\r\n                }\r\n            }\r\n            totalPrice = totalPrice*multiple;\r\n\r\n            if (totalPrice >=500000){\r\n                totalPrice = totalPrice*0.85;\r\n                htmlText2 = ' - <span>15% скидка</span>'\r\n            } else if (totalPrice >=260000){\r\n                totalPrice = totalPrice*0.9;\r\n                htmlText2 = ' - <span>10% скидка</span>'\r\n            } else if (totalPrice >=180000){\r\n                totalPrice = totalPrice*0.95;\r\n                htmlText2 = ' - <span>5% скидка</span>'\r\n            }\r\n\r\n            totalPrice = Math.round(totalPrice);\r\n            globalEsPrice = totalPrice;\r\n\r\n\r\n            $('.ec-results__total .es-total > div').html('ИТОГО: '+echoNumber(totalPrice)+' р.');\r\n            $('.ec-results__col--1 .ec-results__col-number').html(echoNumber(baseHourPrice)+' р./час * '+(es_field_1+addHoues)+' '+declOfNum(es_field_1+addHoues, ['час', 'часа', 'часов']));\r\n            $('.ec-results__col--1 .ec-results__col-text').html(htmlText1);\r\n            if (es_field_2 > 0){\r\n                $('.ec-results__col--6 .ec-results__col-number').html('&nbsp;+ 10.000 р. * '+es_field_2);\r\n                $('.ec-results__col--6, .ec-results__col--2').show();\r\n            } else {\r\n                $('.ec-results__col--6, .ec-results__col--2').hide();\r\n            }\r\n            if (es_field_5 === 'y'){\r\n                $('.ec-results__col--11 .ec-results__col-number').html('&nbsp;+ 5.500 р. * '+(es_field_1+addHoues)+' '+declOfNum(es_field_1+addHoues, ['час', 'часа', 'часов']));\r\n                $('.ec-results__col--11').show();\r\n            } else {\r\n                $('.ec-results__col--11').hide();\r\n            }\r\n            if (es_field_6 > 0){\r\n                $('.ec-results__col--12 .ec-results__col-number').html('&nbsp;+ 2.500 р. * '+es_field_6+' '+declOfNum(es_field_6, ['час', 'часа', 'часов']));\r\n                $('.ec-results__col--12').show();\r\n            } else {\r\n                $('.ec-results__col--12').hide();\r\n            }\r\n\r\n            if (htmlText2 || htmlText3){\r\n                let tempHtml = '&nbsp;';\r\n                if (htmlText3 && es_field_3 === 'y') {\r\n                    tempHtml += '* '+multiple;\r\n                    $('.ec-results__col--3 .ec-results__col-text').html('Коэффициент количества спикеров <br>'+htmlText3).show();\r\n                } else {\r\n                    $('.ec-results__col--3 .ec-results__col-text').html('Коэффициент количества спикеров <br>'+htmlText3).hide();\r\n                }\r\n                if (htmlText2) {\r\n                    tempHtml += htmlText2;\r\n                }\r\n                $('.ec-results__col--3 .ec-results__col-number').html(tempHtml);\r\n                $('.ec-results__col--3, .ec-results__col--sep').show();\r\n            } else {\r\n                $('.ec-results__col--3, .ec-results__col--sep').hide();\r\n            }\r\n            addEsCalc(globalEsPrice);\r\n\r\n            $('.event-calc__section--3').slideDown(200,'linear',function (){\r\n                $('.event-calc__section--4').slideDown(300,'linear',function (){\r\n                    $('.event-calc__section--5').slideDown(300,'linear');\r\n                });\r\n            });\r\n        }\r\n\r\n    });\r\n\r\n    function addEsCalc(globalEsPrice){\r\n        let form = $('.ec-options');\r\n        let addPrice = globalEsPrice;\r\n        form.find('input:checked').each(function() {\r\n            addPrice += parseInt($(this).data('price'));\r\n        });\r\n        $('.ec-options__total .es-total__right > div').html(echoNumber(addPrice)+' р.');\r\n    }\r\n\r\n    $('.ec-options .checkbox').on('change',function (){\r\n        addEsCalc(globalEsPrice);\r\n    });\r\n\r\n    $('.ec-options').on('submit',function () {\r\n        event.preventDefault();\r\n        alert('pdf отправлен');\r\n    });\r\n    $('.es-quest__item').on('click',function () {\r\n        event.preventDefault();\r\n        let id = $(this).data('id');\r\n        $('.es-quest__flex').hide();\r\n        $('.es-quest__thanks').show();\r\n    });\r\n\r\n  // Fixed header\r\n\t(function() {\r\n\t\tvar body = $('body');\r\n\t\tvar header = $('.header');\r\n\t\tvar headerOffset = header.offset().top;\r\n\t\tvar classes = 'header--fixed';\r\n\t\tvar headerHeight = header.outerHeight();\r\n\t\tvar scroll = $(window).scrollTop();\r\n\t\tvar isScroll = false;\r\n\t\tvar isNotStatic = header.hasClass('header--half') && $(window).width() >= 1024 ? true : false;//(header.css('position') === 'absolute') || (header.css('position') === 'fixed') ? true : false;\r\n\r\n\t\t$(window).on('scroll', function() {\r\n\t\t\tscroll = $(window).scrollTop();\r\n\r\n\t\t\tif (scroll >= headerOffset + headerHeight) {\r\n\t\t\t\tisScroll = true;\r\n\r\n\t\t\t\theaderHeight = isScroll ? header.outerHeight() : null;\r\n\t\t\t\theader.addClass(classes);\r\n\r\n\t\t\t\tif (!header.hasClass('is-fixed')) {\r\n\t\t\t\t\theader.css({'top': -headerHeight + 'px', 'transform': 'translateY(' + headerHeight + 'px)'}).addClass('is-fixed');\r\n\r\n\t\t\t\t\tif (!isNotStatic) {\r\n\t\t\t\t\t\tbody.css('padding-top', headerHeight + 'px');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tisScroll = false;\r\n\t\t\t\theader.removeClass(classes + ' is-fixed').removeAttr('style');\r\n\t\t\t\tbody.css('padding-top', 0);\r\n\t\t\t}\r\n\t\t});\r\n\t})();\r\n});\r\n\r\nfunction declOfNum(n, text_forms) {\r\n    n = Math.abs(n) % 100;\r\n    var n1 = n % 10;\r\n    if (n > 10 && n < 20) { return text_forms[2]; }\r\n    if (n1 > 1 && n1 < 5) { return text_forms[1]; }\r\n    if (n1 == 1) { return text_forms[0]; }\r\n    return text_forms[2];\r\n}\r\n\r\nfunction checkESform(){\r\n    $('.ec-form input.required').trigger('change');\r\n}\r\nfunction echoNumber(n){\r\n    return String(n).replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1.\")\r\n}\r\n\r\n\r\n(function($) {\r\n    $.fn.inputFilter = function(inputFilter) {\r\n        return this.on(\"input keydown keyup mousedown mouseup select contextmenu drop\", function() {\r\n            if (inputFilter(this.value)) {\r\n                this.oldValue = this.value;\r\n                this.oldSelectionStart = this.selectionStart;\r\n                this.oldSelectionEnd = this.selectionEnd;\r\n            } else if (this.hasOwnProperty(\"oldValue\")) {\r\n                this.value = this.oldValue;\r\n                this.setSelectionRange(this.oldSelectionStart, this.oldSelectionEnd);\r\n            } else {\r\n                this.value = \"\";\r\n            }\r\n        });\r\n    };\r\n}(jQuery));"]}