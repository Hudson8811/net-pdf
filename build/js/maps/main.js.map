{"version":3,"sources":["main.js"],"names":["$","jQuery","noConflict","declOfNum","n","text_forms","n1","Math","abs","checkESform","trigger","echoNumber","String","replace","document","ready","hover","this","closest","find","css","magnificPopup","type","inputFilter","value","test","on","val","trim","addClass","removeClass","globalEsPrice","addEsCalc","form","addPrice","each","parseInt","data","html","body","header","headerOffset","headerHeight","isNotStatic","event","preventDefault","formId","es_field_1","es_field_3","es_field_4","es_field_5","es_field_6","htmlText1","htmlText2","htmlText3","baseHourPrice","multiple","totalPrice","round","show","hide","tempHtml","slideDown","es_field_7","console","log","alert","offset","top","outerHeight","window","scrollTop","hasClass","width","transform","classes","removeAttr","fn","oldValue","oldSelectionStart","selectionStart","oldSelectionEnd","selectionEnd","hasOwnProperty","setSelectionRange"],"mappings":"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","file":"../main.js","sourcesContent":["let $ = jQuery.noConflict();\r\n\r\n$(document).ready(function() {\r\n    $(\".ec-options .tooltip\").hover(\r\n        function() {\r\n            $(this).closest('.checkbox').find('.tooltiptext').css(\"visibility\", \"visible\");\r\n        },\r\n        function() {\r\n            $(this).closest('.checkbox').find('.tooltiptext').css(\"visibility\", \"hidden\");\r\n        }\r\n    );\r\n\r\n    $('.js-video-popup').magnificPopup({\r\n        type: 'iframe'\r\n    });\r\n\r\n    $(\".ec-form__field input.required:not(.number-limit)\").inputFilter(function(value) {\r\n        return /^\\d*$/.test(value);\r\n    });\r\n    $(\".ec-form__field input.required.number-limit\").inputFilter(function(value) {\r\n        return /^[123]?$/.test(value);\r\n    });\r\n    $('.ec-form__field input.required').on('change',function (){\r\n        let value = $(this).val();\r\n        if (value.trim() === ''){\r\n            $(this).closest('.ec-form__field').addClass('ec-form__field--error');\r\n        } else {\r\n            $(this).closest('.ec-form__field').removeClass('ec-form__field--error');\r\n        }\r\n    });\r\n\r\n    $('.ec-form__col-field input.required').on('change',function (){\r\n        let value = $(this).val();\r\n        if (value.trim() === ''){\r\n            $(this).closest('.ec-form__col-field').addClass('ec-form__col-field--error');\r\n        } else {\r\n            $(this).closest('.ec-form__col-field').removeClass('ec-form__col-field--error');\r\n        }\r\n    });\r\n\r\n\r\n\r\n    $('.ec-form .ec-btn').on('click',function (){\r\n        checkESform();\r\n    });\r\n    let globalEsPrice = 0;\r\n    $('.ec-form').on('submit',function (){\r\n        event.preventDefault();\r\n        let form = $('.ec-form');\r\n        let formId = parseInt(form.data('id'));\r\n        if (formId === 1){\r\n            let es_field_1 = parseInt(form.find('input[name=\"es_field_1\"]').val()),\r\n                es_field_2 = parseInt(form.find('input[name=\"es_field_2\"]').val()),\r\n                es_field_3 = parseInt(form.find('input[name=\"es_field_3\"]').val()),\r\n                es_field_4 = parseInt(form.find('input[name=\"es_field_4\"]').val()),\r\n                es_field_5 = parseInt(form.find('input[name=\"es_field_5\"]').val()),\r\n                es_field_6 = parseInt(form.find('input[name=\"es_field_6\"]').val());\r\n\r\n            let htmlText1 = '1 камерой';\r\n            let htmlText2 = '';\r\n            let htmlText3 = '';\r\n\r\n            let baseHourPrice = 7500;\r\n            let multiple = 1;\r\n            if (es_field_4 === 2) {\r\n                baseHourPrice = 8500;\r\n                htmlText1 = '2 камерами';\r\n            } else if (es_field_4 === 3) {\r\n                baseHourPrice = 9500;\r\n                htmlText1 = '3 камерами';\r\n            }\r\n\r\n            let totalPrice = 0;\r\n            totalPrice += baseHourPrice*es_field_1*2;\r\n            totalPrice += baseHourPrice*es_field_3;\r\n\r\n            if (es_field_5 > 2){\r\n                totalPrice += 2000*es_field_5;\r\n            }\r\n            if (es_field_6 > 20){\r\n                multiple = 1.4;\r\n                htmlText3 = 'от 21';\r\n            } else if (es_field_6 > 15) {\r\n                multiple = 1.35;\r\n                htmlText3 = 'от 16 до 20';\r\n            } else if (es_field_6 > 10) {\r\n                multiple = 1.3;\r\n                htmlText3 = 'от 11 до 15';\r\n            } else if (es_field_6 > 6) {\r\n                multiple = 1.2;\r\n                htmlText3 = 'от 7 до 10';\r\n            } else if (es_field_6 > 3) {\r\n                multiple = 1.1;\r\n                htmlText3 = 'от 3 до 6';\r\n            }\r\n            totalPrice = totalPrice*multiple;\r\n            if (totalPrice >=500000){\r\n                totalPrice = totalPrice*0.85;\r\n                htmlText2 = ' - <span>15% скидка</span>'\r\n            } else if (totalPrice >=260000){\r\n                totalPrice = totalPrice*0.9;\r\n                htmlText2 = ' - <span>10% скидка</span>'\r\n            } else if (totalPrice >=180000){\r\n                totalPrice = totalPrice*0.95;\r\n                htmlText2 = ' - <span>5% скидка</span>'\r\n            }\r\n\r\n            totalPrice = Math.round(totalPrice);\r\n            globalEsPrice = totalPrice;\r\n\r\n\r\n            $('.ec-results__total .es-total > div').html('ИТОГО: '+echoNumber(totalPrice)+' р.');\r\n            $('.ec-results__col--1 .ec-results__col-number').html(echoNumber(baseHourPrice)+' р./час * '+es_field_1*2+' '+declOfNum(es_field_1*2, ['час', 'часа', 'часов']));\r\n            $('.ec-results__col--1 .ec-results__col-text').html('Ставка за час за комплект оборудования со съемочной группой с '+htmlText1);\r\n            if (es_field_3 > 0){\r\n                $('.ec-results__col--5 .ec-results__col-number').html('&nbsp;+ '+echoNumber(baseHourPrice)+' р.');\r\n                $('.ec-results__col--2 .ec-results__col-number').html('&nbsp;* '+es_field_3+' '+declOfNum(es_field_3, ['час', 'часа', 'часов']));\r\n                $('.ec-results__col--5, .ec-results__col--2').show();\r\n            } else {\r\n                $('.ec-results__col--5, .ec-results__col--2').hide();\r\n            }\r\n            if (es_field_5 > 2){\r\n                $('.ec-results__col--4 .ec-results__col-number').html('&nbsp;+ 2.000 р. * '+es_field_5);\r\n                $('.ec-results__col--4').show();\r\n            } else {\r\n                $('.ec-results__col--4').hide();\r\n            }\r\n\r\n            if (htmlText2 || htmlText3){\r\n                let tempHtml = '&nbsp;';\r\n                if (htmlText3) {\r\n                    tempHtml += '* '+multiple;\r\n                    $('.ec-results__col--3 .ec-results__col-text').html('Коэффициент количества спикеров <br>'+htmlText3).show();\r\n                } else {\r\n                    $('.ec-results__col--3 .ec-results__col-text').html('Коэффициент количества спикеров <br>'+htmlText3).hide();\r\n                }\r\n                if (htmlText2) {\r\n                    tempHtml += htmlText2;\r\n                }\r\n                $('.ec-results__col--3 .ec-results__col-number').html(tempHtml);\r\n                $('.ec-results__col--3, .ec-results__col--sep').show();\r\n            } else {\r\n                $('.ec-results__col--3, .ec-results__col--sep').hide();\r\n            }\r\n            addEsCalc(globalEsPrice);\r\n\r\n            $('.event-calc__section--3').slideDown(200,'linear',function (){\r\n                $('.event-calc__section--4').slideDown(300,'linear',function (){\r\n                    $('.event-calc__section--5').slideDown(300,'linear');\r\n                });\r\n            });\r\n        } else if (formId === 2){\r\n            let es_field_1 = parseInt(form.find('input[name=\"es_field_1\"]').val()),\r\n                es_field_2 = parseInt(form.find('input[name=\"es_field_2\"]').val()),\r\n                es_field_3 = form.find('select[name=\"es_field_3\"]').val(),\r\n                es_field_4 = parseInt(form.find('input[name=\"es_field_4\"]').val()),\r\n                es_field_5 = form.find('select[name=\"es_field_5\"]').val(),\r\n                es_field_6 = parseInt(form.find('input[name=\"es_field_6\"]').val()),\r\n                es_field_7 = parseInt(form.find('input[name=\"es_field_7\"]').val());\r\n\r\n            let htmlText1 = 'Ставка за час за комплект оборудования';\r\n            let htmlText2 = '';\r\n            let htmlText3 = '';\r\n\r\n            let baseHourPrice = 4500;\r\n            let multiple = 1;\r\n            if (es_field_4 === 1) {\r\n                baseHourPrice = 7500;\r\n                htmlText1 = 'Ставка за час за комплект оборудования со съемочной группой с 1 камерой';\r\n            } else if (es_field_4 === 2) {\r\n                baseHourPrice = 8500;\r\n                htmlText1 = 'Ставка за час за комплект оборудования со съемочной группой с 2 камерами';\r\n            } if (es_field_4 === 3) {\r\n                baseHourPrice = 9500;\r\n                htmlText1 = 'Ставка за час за комплект оборудования со съемочной группой с 3 камерами';\r\n            }\r\n\r\n            let totalPrice = 0;\r\n            totalPrice += baseHourPrice*(es_field_1+2);\r\n\r\n            if (es_field_5 === 'y'){\r\n                totalPrice += 5500*(es_field_1+2);\r\n            }\r\n            if (es_field_6 > 0){\r\n                totalPrice += 2500*es_field_6;\r\n            }\r\n\r\n            if (es_field_7 > 20){\r\n                multiple = 1.4;\r\n                htmlText3 = 'от 21';\r\n            } else if (es_field_6 > 15) {\r\n                multiple = 1.35;\r\n                htmlText3 = 'от 16 до 20';\r\n            } else if (es_field_6 > 10) {\r\n                multiple = 1.3;\r\n                htmlText3 = 'от 11 до 15';\r\n            } else if (es_field_6 > 6) {\r\n                multiple = 1.2;\r\n                htmlText3 = 'от 7 до 10';\r\n            } else if (es_field_6 > 3) {\r\n                multiple = 1.1;\r\n                htmlText3 = 'от 3 до 6';\r\n            }\r\n            totalPrice = totalPrice*multiple;\r\n\r\n            totalPrice = Math.round(totalPrice);\r\n            globalEsPrice = totalPrice;\r\n\r\n\r\n            $('.ec-results__total .es-total > div').html('ИТОГО: '+echoNumber(totalPrice)+' р.');\r\n            $('.ec-results__col--1 .ec-results__col-number').html(echoNumber(baseHourPrice)+' р./час * '+es_field_1*2+' '+declOfNum(es_field_1+2, ['час', 'часа', 'часов']));\r\n            $('.ec-results__col--1 .ec-results__col-text').html(htmlText1);\r\n            console.log(es_field_5);\r\n            if (es_field_5 === 'y'){\r\n                $('.ec-results__col--11 .ec-results__col-number').html('&nbsp;+ 5.500 р. * '+declOfNum(es_field_1+2, ['час', 'часа', 'часов']));\r\n                $('.ec-results__col--11').show();\r\n            } else {\r\n                $('.ec-results__col--11').hide();\r\n            }\r\n            if (es_field_6 > 0){\r\n                $('.ec-results__col--12 .ec-results__col-number').html('&nbsp;+ 2.500 р. * '+declOfNum(es_field_6, ['час', 'часа', 'часов']));\r\n                $('.ec-results__col--12').show();\r\n            } else {\r\n                $('.ec-results__col--12').hide();\r\n            }\r\n\r\n            if (htmlText2 || htmlText3){\r\n                let tempHtml = '&nbsp;';\r\n                if (htmlText3) {\r\n                    tempHtml += '* '+multiple;\r\n                    $('.ec-results__col--3 .ec-results__col-text').html('Коэффициент количества спикеров <br>'+htmlText3).show();\r\n                } else {\r\n                    $('.ec-results__col--3 .ec-results__col-text').html('Коэффициент количества спикеров <br>'+htmlText3).hide();\r\n                }\r\n                if (htmlText2) {\r\n                    tempHtml += htmlText2;\r\n                }\r\n                $('.ec-results__col--3 .ec-results__col-number').html(tempHtml);\r\n                $('.ec-results__col--3, .ec-results__col--sep').show();\r\n            } else {\r\n                $('.ec-results__col--3, .ec-results__col--sep').hide();\r\n            }\r\n            addEsCalc(globalEsPrice);\r\n\r\n            $('.event-calc__section--3').slideDown(200,'linear',function (){\r\n                $('.event-calc__section--4').slideDown(300,'linear',function (){\r\n                    $('.event-calc__section--5').slideDown(300,'linear');\r\n                });\r\n            });\r\n        }\r\n\r\n    });\r\n\r\n    function addEsCalc(globalEsPrice){\r\n        let form = $('.ec-options');\r\n        let addPrice = globalEsPrice;\r\n        form.find('input:checked').each(function() {\r\n            addPrice += parseInt($(this).data('price'));\r\n        });\r\n        $('.ec-options__total .es-total__right > div').html(echoNumber(addPrice)+' р.');\r\n    }\r\n\r\n    $('.ec-options .checkbox').on('change',function (){\r\n        addEsCalc(globalEsPrice);\r\n    });\r\n\r\n    $('.ec-options').on('submit',function () {\r\n        event.preventDefault();\r\n        alert('pdf отправлен');\r\n    });\r\n    $('.es-quest__item').on('click',function () {\r\n        event.preventDefault();\r\n        let id = $(this).data('id');\r\n        $('.es-quest__flex').hide();\r\n        $('.es-quest__thanks').show();\r\n    });\r\n\r\n  // Fixed header\r\n\t(function() {\r\n\t\tvar body = $('body');\r\n\t\tvar header = $('.header');\r\n\t\tvar headerOffset = header.offset().top;\r\n\t\tvar classes = 'header--fixed';\r\n\t\tvar headerHeight = header.outerHeight();\r\n\t\tvar scroll = $(window).scrollTop();\r\n\t\tvar isScroll = false;\r\n\t\tvar isNotStatic = header.hasClass('header--half') && $(window).width() >= 1024 ? true : false;//(header.css('position') === 'absolute') || (header.css('position') === 'fixed') ? true : false;\r\n\r\n\t\t$(window).on('scroll', function() {\r\n\t\t\tscroll = $(window).scrollTop();\r\n\r\n\t\t\tif (scroll >= headerOffset + headerHeight) {\r\n\t\t\t\tisScroll = true;\r\n\r\n\t\t\t\theaderHeight = isScroll ? header.outerHeight() : null;\r\n\t\t\t\theader.addClass(classes);\r\n\r\n\t\t\t\tif (!header.hasClass('is-fixed')) {\r\n\t\t\t\t\theader.css({'top': -headerHeight + 'px', 'transform': 'translateY(' + headerHeight + 'px)'}).addClass('is-fixed');\r\n\r\n\t\t\t\t\tif (!isNotStatic) {\r\n\t\t\t\t\t\tbody.css('padding-top', headerHeight + 'px');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tisScroll = false;\r\n\t\t\t\theader.removeClass(classes + ' is-fixed').removeAttr('style');\r\n\t\t\t\tbody.css('padding-top', 0);\r\n\t\t\t}\r\n\t\t});\r\n\t})();\r\n});\r\n\r\nfunction declOfNum(n, text_forms) {\r\n    n = Math.abs(n) % 100;\r\n    var n1 = n % 10;\r\n    if (n > 10 && n < 20) { return text_forms[2]; }\r\n    if (n1 > 1 && n1 < 5) { return text_forms[1]; }\r\n    if (n1 == 1) { return text_forms[0]; }\r\n    return text_forms[2];\r\n}\r\n\r\nfunction checkESform(){\r\n    $('.ec-form input.required').trigger('change');\r\n}\r\nfunction echoNumber(n){\r\n    return String(n).replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1.\")\r\n}\r\n\r\n\r\n(function($) {\r\n    $.fn.inputFilter = function(inputFilter) {\r\n        return this.on(\"input keydown keyup mousedown mouseup select contextmenu drop\", function() {\r\n            if (inputFilter(this.value)) {\r\n                this.oldValue = this.value;\r\n                this.oldSelectionStart = this.selectionStart;\r\n                this.oldSelectionEnd = this.selectionEnd;\r\n            } else if (this.hasOwnProperty(\"oldValue\")) {\r\n                this.value = this.oldValue;\r\n                this.setSelectionRange(this.oldSelectionStart, this.oldSelectionEnd);\r\n            } else {\r\n                this.value = \"\";\r\n            }\r\n        });\r\n    };\r\n}(jQuery));"]}